[English](service1.md) | [Русский](service1.ru_RU.md)

## Общие сведения

Интерфейс `org.altlinux.alterator.service1` определяет операции жизненного цикла для сервисов, управляемых через Alterator. Данные интроспекции устанавливаются в `/usr/share/dbus-1/interfaces/org.altlinux.alterator.service1.xml`; значения PolicyKit задаются файлом `/usr/share/polkit-1/actions/org.altlinux.alterator.service1.policy`. Методы возвращают код выполнения backend-процесса (`0` — успех, `!= 0` — ошибка). Параметры конфигурации передаются в виде единой строки в `stdin` backend-процесса.

## `Info() -> (stdout_bytes: ay, response: i)`

- Назначение: выдаёт Alterator Entry инструмента (`service`-сущность).
- Параметры: нет; возвращает `stdout_bytes` с описанием и `response`.
- Ожидаемое поведение (пример): `stdout_bytes` содержит сериализованную запись, `response = 0`.

## `Deploy(stdin: s) -> (response: i)`

- Назначение: разворачивает сервис по параметрам, переданным через `stdin`.
- Параметры: `stdin` — строка конфигурации; возвращает `response`.
- Ожидаемое поведение (пример): backend применяет конфигурацию, `response = 0` при успешном выполнении.

## `Start() -> (response: i)`

- Назначение: запускает systemd-юниты, используемые сервисом.
- Параметры: нет; возвращает `response`.
- Ожидаемое поведение (пример): юниты запущены, `response = 0`; ошибки запуска дают `response != 0`.

## `Stop() -> (response: i)`

- Назначение: останавливает systemd-юниты, используемые сервисом.
- Параметры: нет; возвращает `response`.
- Ожидаемое поведение (пример): юниты остановлены, `response = 0`; ошибки фиксируются в ненулевом коде.

## `Configure(stdin: s) -> (response: i)`

- Назначение: меняет настройки уже развёрнутого сервиса.
- Параметры: `stdin` — строка конфигурации; возвращает `response`.
- Ожидаемое поведение (пример): конфигурация применена, `response = 0`.

## `Undeploy(stdin: s) -> (response: i)`

- Назначение: отключает или удаляет развёрнутый сервис.
- Параметры: `stdin` — данные для процедуры отключения; возвращает `response`.
- Ожидаемое поведение (пример): сервис отключён согласно входным данным, `response = 0`.

## `Backup(stdin: s) -> (response: i)`

- Назначение: создаёт резервную копию сервиса по параметрам из `stdin`.
- Параметры: `stdin` — спецификация резервирования; возвращает `response`.
- Ожидаемое поведение (пример): резервная копия создана, `response = 0`.

## `Restore(stdin: s) -> (response: i)`

- Назначение: восстанавливает сервис из резервной копии согласно параметрам в `stdin`.
- Параметры: `stdin` — спецификация восстановления; возвращает `response`.
- Ожидаемое поведение (пример): состояние сервиса восстановлено, `response = 0`; ошибки приводят к `response != 0`.

## `Status() -> (stdout_bytes: ay, response: i)`

- Назначение: возвращает текущее состояние сервиса.
- Параметры: нет; возвращает `stdout_bytes` со статусом и `response`.
- Ожидаемое поведение (пример): `stdout_bytes` описывает, развёрнут ли сервис и каким образом, `response = 0`.

## Сигналы

### `service_stderr_signal(line: s)`

- Назначение: асинхронно передаёт строки stderr от backend-процесса.
- Содержимое: одно сообщение соответствует одной строке из потока `stderr`.

### `service_stdout_signal(line: s)`

- Назначение: асинхронно передаёт строки stdout от backend-процесса.
- Содержимое: одно сообщение соответствует одной строке из потока `stdout`.
