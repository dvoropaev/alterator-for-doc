# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–∏–º–∏ –ø–∞–ø–∫–∞–º–∏ Samba

*(–≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî —Ä—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–¥–µ—Å—å: [README.en.md](README.en.md))*

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–∏–º–∏ –ø–∞–ø–∫–∞–º–∏ Samba. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å, –∏–∑–º–µ–Ω–∏—è—Ç—å, –∑–∞–ø—É—Å–∫–∞—Ç—å, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å Samba-shares, –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ Samba.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ Samba-shares** —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π:
  - –∏–º–µ–Ω–∏ –æ–±—â–µ–π –ø–∞–ø–∫–∏ (`share_name`);
  - –ø—É—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É (`share_path`);
  - –≤–ª–∞–¥–µ–ª—å—Ü–∞ (`access_user`);
  - —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞ (`ro` ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, `rw` ‚Äî —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å);
  - —Å–ø–∏—Å–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`allowed_users`);
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–∞–º–∏ Samba** (`smb.service`, `nmb.service`);
- **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —Å–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ Samba** (–≤–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–ª—É–∂–±);
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ACL-–ø—Ä–∞–≤** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ;
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**;
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º (`testparm -s`);
- **–í—ã–≤–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è Samba –∏ –≤—Å–µ—Ö —à–∞—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON**;
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∞—É–¥–∏—Ç–∞.

---

## –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª                                   | –û–ø–∏—Å–∞–Ω–∏–µ                                      | –ü—É—Ç—å                                                           |
|----------------------------------------|-----------------------------------------------|----------------------------------------------------------------|
| –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç                        | CLI-—Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Samba-—à–∞—Ä–∞–º–∏            | `/usr/bin/service-samba-shares`                               |
| Backend-—Ñ–∞–π–ª                           | –õ–æ–≥–∏–∫–∞ backend –¥–ª—è Alterator                  | `/usr/share/alterator/backends/service-samba-shares.backend`  |
| –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Alterator         | –§–∞–π–ª `.service` –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Alterator      | `/usr/share/alterator/service/service-samba-shares.service`   |
| –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏   | –•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª–µ–º)       | `/var/lib/alterator/service/service-samba-shares/config-backup` |
| –ö–∞—Ç–∞–ª–æ–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è backup/restore      | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è      | `/var/lib/alterator/service/service-samba-shares/backup`      |

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

### 1. –ß—Ç–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**:

- –í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –æ–Ω –ø—Ä–æ—á–∏—Ç–∞–µ—Ç JSON –∏–∑ **stdin** —Å —Ç–∞–π–º–∞—É—Ç–æ–º **10 —Å–µ–∫—É–Ω–¥**.
- –ï—Å–ª–∏ –∑–∞ —ç—Ç–æ –≤—Ä–µ–º—è –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏—à–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç:  
  `"{}"`.
- –ü–æ–ª–µ `operation` –º–æ–∂–µ—Ç –±—ã—Ç—å:
  - –ª–∏–±–æ –≤ —Å–∞–º–æ–º JSON (`{"operation": "create", ...}`),
  - –ª–∏–±–æ –ø–µ—Ä–µ–¥–∞–Ω–æ –∫–∞–∫ **–ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏**.

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `operation` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **`status`**.

---

### 2. –†–∞–∑–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –≤–Ω—É—Ç—Ä–∏ JSON –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º:

```json
{
  "operation": "create",
  "create": {
    "share_name": "data",
    "share_path": "/srv/data",
    "access_user": "alice",
    "access_type": "rw",
    "allowed_users": "bob,carol",
    "anonymous_enabled": true
  }
}
```

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è:

–î–ª—è create (.create.*):

- share_name ‚Äî –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ);

- share_path ‚Äî –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ);

- access_user ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ—Ç –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞);

- access_type ‚Äî ro –∏–ª–∏ rw (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ);

- allowed_users ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ);

- anonymous_enabled ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –≥–æ—Å—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

–î–ª—è update (.update.*):

- share_name ‚Äî –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ);

- –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (share_path, access_user, access_type, allowed_users)
–º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å ‚Äî —Ç–æ–≥–¥–∞ –±–µ—Ä—É—Ç—Å—è —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è;

- delete_prev_allowed ‚Äî –µ—Å–ª–∏ true, —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–æ—á–∏—â–∞–µ—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–æ–≤—ã–º;

- anonymous_enabled ‚Äî –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –≥–æ—Å—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø.

–î–ª—è delete (.delete.*):

- share_name ‚Äî –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).

–î–ª—è backup/restore (–≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å):

- backup_name ‚Äî –∏–º—è –Ω–∞–±–æ—Ä–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).


### 3. –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Samba –∏ ACL

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º Samba:

```
–§–∞–π–ª: /etc/samba/smb.conf.
```

–î–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –æ–±—â–∏—Ö –ø–∞–ø–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è testparm -s –∏ —Ä–∞–∑–±–æ—Ä –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ awk.

–î–ª—è –∫–∞–∂–¥–æ–π –æ–±—â–µ–π –ø–∞–ø–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è:

- share_name,

- share_path,

- access_type (–ø–æ writable / read only),

- valid users ‚Üí allowed_users.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

# create:

- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–±—â–µ–π –ø–∞–ø–∫–∏ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –µ—â—ë –Ω–µ—Ç;

- —Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ç–∞–ª–æ–≥, –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ (chown) –∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ (chmod 2750/2770);

- —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è valid users —Å —É—á—ë—Ç–æ–º:

```json
–≤–ª–∞–¥–µ–ª—å—Ü–∞,

allowed_users,
```

- anonymous_enabled (–¥–æ–±–∞–≤–ª—è–µ—Ç/—É–±–∏—Ä–∞–µ—Ç nobody);

- –ø—Ä–∏–º–µ–Ω—è–µ—Ç ACL –∫ –∫–∞—Ç–∞–ª–æ–≥—É (—á–µ—Ä–µ–∑ setfacl):

- –≤–ª–∞–¥–µ–ª—å—Ü—É ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–µ –ø—Ä–∞–≤–∞ (chmod);

- –æ—Å—Ç–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º ‚Äî rx –∏–ª–∏ rwx –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç access_type;

- –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é –≤ smb.conf;

- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ testparm -s;

- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç smb.service.

# update:

- —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—â–µ–π –ø–∞–ø–∫–∏ –∏–∑ smb.conf –∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã;

- –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç/–∑–∞–º–µ–Ω—è–µ—Ç —Å–ø–∏—Å–æ–∫ allowed_users –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç delete_prev_allowed;

- –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ ACL (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ create);

- —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é —Å–µ–∫—Ü–∏—é –ø–∞–ø–∫–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏;

- –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç smb.conf –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç smb.service.

# delete:

- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–µ–∫—Ü–∏—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç;

- —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ smb.conf
(–∫–∞—Ç–∞–ª–æ–≥ –Ω–∞ –¥–∏—Å–∫–µ –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è);

- –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ testparm -s;

- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç smb.service.

–í–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∏ —Ç.–¥.)
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å –æ—à–∏–±–∫–æ–π –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–∞–º–∏ –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

–°–∫—Ä–∏–ø—Ç —É–º–µ–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ª—É–∂–±–∞–º–∏ Samba –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:

# deploy:

- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Samba;

- –æ–¥–∏–Ω —Ä–∞–∑ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π /etc/samba/smb.conf
–≤ /var/lib/alterator/service/service-samba-share/config-backup/smb-original.conf;

- –≤–∫–ª—é—á–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç smb –∏ nmb (systemctl enable --now smb nmb);

- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–ª—É–∂–±.

# undeploy:

- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ backup_all);

- –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç smb –∏ nmb;

- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ smb-original.conf ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ–≥–æ;

- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞–≤—Ç–æ-–±—ç–∫–∞–ø–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–ª—É–∂–±.

# backup:

- —Å–æ–∑–¥–∞—ë—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é: smb.conf –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—â–∏—Ö –ø–∞–ø–æ–∫ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –Ω–∞ –¥–∏—Å–∫–µ),

- —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∏—Ö –≤:

```json
/var/lib/alterator/service/service-samba-share/config-backup/,

/var/lib/alterator/service/service-samba-share/data-backup/,
```
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø—É—Ç—è–º–∏ –∫ —Å–æ–∑–¥–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º.

# restore:

- –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç smb.conf –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞;

- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ testparm -s;

- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç smb.service;

- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞—Ä—Ö–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –µ–≥–æ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É;

- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –¥–µ—Ç–∞–ª—è–º–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

# status:

- –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç systemctl is-active smb.service –∏ nmb.service;

- —Å–æ–±–∏—Ä–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–±—â–∏—Ö –ø–∞–ø–æ–∫ —á–µ—Ä–µ–∑ get_samba_shares + augment_shares_with_owner;

- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å–æ —Å–ø–∏—Å–∫–æ–º –æ–±—â–∏—Ö –ø–∞–ø–æ–∫, –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–ª—É–∂–±;

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ `.service` (–æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–§–∞–π–ª `.service` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å **samba_shares**, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Samba-shares —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- `type = "Service"` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ —ç—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç.
- `name = "samba_shares"` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞.
- `category = "X-Alterator-Servers"` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- `persistent = true` ‚Äî —Å–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏.
- `display_name` –∏ `comment` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–∞—Ö.
- `icon = "network-server"` ‚Äî –∏–∫–æ–Ω–∫–∞ –¥–ª—è UI.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (parameters)

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –æ—Ç–¥–µ–ª—å–Ω—ã—Ö Samba-—à–∞—Ä.

- `share_name` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏).
- `share_path` ‚Äî –ø—É—Ç—å –∫ —Ä–∞—Å—à–∞—Ä–∏–≤–∞–µ–º–æ–π –ø–∞–ø–∫–µ.
- `access_user` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø.
- `access_type` ‚Äî —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞: `ro` (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) –∏–ª–∏ `rw` (—á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å).
- `enabled` ‚Äî —Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ–±—â–µ–π –ø–∞–ø–∫–∏ –≤ "–°–µ—Ç–∏".

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (`configure`), —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (`backup`), –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (`restore`), –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ (`status`).

### –†–µ—Å—É—Ä—Å—ã (resources)

- `smb_conf` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Samba `/etc/samba/smb.conf`.
- `smb_service` –∏ `nmb_service` ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–ª—É–∂–±—ã Samba –∏ NetBIOS, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —á–µ—Ä–µ–∑ systemd (`smb.service`, `nmb.service`).

### –ú–∞—Å—Å–∏–≤ `shares`

–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö Samba-shares —Å –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

- `share_name`
- `share_path`
- `access_user`
- `access_type`
- `enabled`

–≠—Ç–æ—Ç –º–∞—Å—Å–∏–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ `status`, –ø–æ–∑–≤–æ–ª—è—è —É–¥–æ–±–Ω–æ –≤–∏–¥–µ—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—â–∏–µ –ø–∞–ø–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.


### ACL

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã `setfacl` –∏ `getfacl` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.  
–§—É–Ω–∫—Ü–∏—è, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ —ç—Ç–æ ‚Äî `apply_fs_acl_for_valid_users`.

–†–∞–±–æ—Ç–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤:

1. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö ACL**  
   ```bash
   setfacl -b "$path"
   ```

–í—Å–µ —Å—Ç–∞—Ä—ã–µ ACL —É–¥–∞–ª—è—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –º—É—Å–æ—Ä.

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Å–∫–∏ –ø—Ä–∞–≤**

   ```bash
   setfacl -m m::rwx "$path"
   setfacl -d -m m::rwx "$path"
   ```

   –ú–∞—Å–∫–∞ (mask) –∑–∞–¥–∞—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –ø—Ä–∞–≤–∞.
   –ó–¥–µ—Å—å rwx, —á—Ç–æ–±—ã –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –Ω–∞–∑–Ω–∞—á–∞–µ–º—ã–µ ACL.

3. –í—ã–¥–∞—á–∞ –ø—Ä–∞–≤ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞ allowed_users (–∫—Ä–æ–º–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞):

   * –ø—Ä–∏ —Ç–∏–ø–µ –¥–æ—Å—Ç—É–ø–∞ `rw` ‚Äî –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –ø—Ä–∞–≤–∞ rwx;
   * –ø—Ä–∏ —Ç–∏–ø–µ `ro` ‚Äî –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –ø—Ä–∞–≤–∞ rx.

      setfacl -m u:"$user":"$perms" "$path"
   setfacl -d -m u:"$user":"$perms" "$path"
   

   –§–ª–∞–≥ -d –∑–∞–¥–∞—ë—Ç –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–µ –ø—Ä–∞–≤–∞ ‚Äî –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏,
   —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Ç–æ—Ç –∂–µ ACL.


### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã create –∏–ª–∏ update
–º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ ACL —á–µ—Ä–µ–∑:

getfacl /home/test/test-create-upd

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```json
# file: home/test/test-create-upd
# owner: admin
# group: admin
# flags: -s-
user::rwx
user:user1:rwx
user:user2:rwx
user:nobody:rwx
group::rwx
mask::rwx
other::r-x
default:user::rwx
default:user:user1:rwx
default:user:user2:rwx
default:user:nobody:rwx
default:group::rwx
default:mask::rwx
default:other::r-x
```

- user::rwx ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –∫–∞—Ç–∞–ª–æ–≥–∞ admin, –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- user:user1:rwx ‚Äî User1 –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã
- user:user2:rx ‚Äî User2 –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã
- user:nobody:rwx - –í–∫–ª—é—á–µ–Ω –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø
- default: ‚Äî ¬´–Ω–∞—Å–ª–µ–¥—É–µ–º—ã–µ –ø—Ä–∞–≤–∞¬ª, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏

### 4. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ ACL –∏ Samba

–ö–æ–≥–¥–∞ Samba —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª /etc/samba/smb.conf, –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ valid users.
ACL –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —ç—Ç–∏–º —Å–ø–∏—Å–∫–æ–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:

* –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–Ω –≤ valid users, –Ω–æ –Ω–µ –∏–º–µ–µ—Ç —Ñ–∞–π–ª–æ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞,
  Samba –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–æ–π –ø–∞–ø–∫–æ–π (–æ—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞);
* –µ—Å–ª–∏ ACL –≤—ã–¥–∞–Ω—ã, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ valid users, Samba –Ω–µ –ø—É—Å—Ç–∏—Ç –µ–≥–æ –∫ —à–µ–µ.

–ü–æ—ç—Ç–æ–º—É —Å–∫—Ä–∏–ø—Ç –≤—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –æ–±–∞ —É—Ä–æ–≤–Ω—è:

* –ø–∞—Ä–∞–º–µ—Ç—Ä valid users –≤ –∫–æ–Ω—Ñ–∏–≥–µ Samba;
* ACL –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.


### 5. –ü—Ä–∏–º–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

| –¢–∏–ø –¥–æ—Å—Ç—É–ø–∞           | Samba (valid users)        | ACL –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ                       |
| --------------------- | -------------------------- | -------------------------------------------- |
| rw (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)    | admin, user1, user2        | admin:rwx, user1:rwx, user2:rwx              |
| ro (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)    | admin, user1, user2        | admin:rwx, user1:rx, user2:rx                |
| anonymous_access=true | –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è nobody         | nobody:rx (—á—Ç–µ–Ω–∏–µ) –∏–ª–∏ nobody:rwx (–µ—Å–ª–∏ rw)  |


### 6. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* ACL –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–∞—Ç–∞–ª–æ–≥—É —à–∞—Ä—ã, –Ω–µ –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º –≤–Ω—É—Ç—Ä–∏.
  –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç –ø—Ä–∞–≤–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è default: ACL.
* –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ update —Å—Ç–∞—Ä—ã–µ ACL –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞—é—Ç—Å—è,
  —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º–∏ –∏ –Ω–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
* –í–ª–∞–¥–µ–ª—å—Ü—É (access_user) ACL –Ω–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è ‚Äî
  –æ–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ chmod 2750/2770.
* –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø (anonymous_enabled=true),
  –≤ ACL –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å nobody.


## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –¥–≤—É—Ö —è–∑—ã–∫–∞—Ö:

* üá∑üá∫ –†—É—Å—Å–∫–∏–π ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª [README.ru.md](README.ru.md)
* üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π ‚Äî [README.en.md](README.en.md)

---