# Глава 1. Архитектура Alterator
Alterator — платформа управления службами и настройками, построенная вокруг D-Bus и описаний Alterator Entry.

## Ключевые компоненты репозитория
Возможности:
- alterator-manager — фоновый демон, читающий `.backend` файлы и предоставляющий D-Bus-интерфейсы для модулей. Демон собирается из исходников `alterator-manager/` и работает как системная служба `alterator-manager.service`.
- alterator-entry — набор спецификаций и инструментов для описания сущностей (application, backend, service и др.) в формате TOML-подобных файлов.
- alterator-interface-service — D-Bus-интерфейс `org.altlinux.alterator.service1` с операциями развертывания, запуска и конфигурации сервисов.
- alterator-service-* — примеры прикладных сервисов, использующие общий стек (в репозитории присутствуют chrony, samba-share и др.).
- alterator-test-services — набор учебных сервисов для демонстрации формата `.service` и `.backend`.
- alterator-backend-packages — инструменты сборки пакетов backend-описаний для разных дистрибутивов.
- interface-service.wiki и alterator-manager-servises.wiki — пользовательская документация в вики-формате.

## Поток работы платформы
Порядок:
1. Сущность описывается в Alterator Entry (`.service`, `.backend`, `.application` и т.д.) и устанавливается в `/usr/share/alterator/...` либо `/etc/alterator/...`.
2. alterator-manager при запуске читает `.backend` файлы, загружает информацию о методах и регистрирует D-Bus-объекты.
3. UI или автоматизированные клиенты используют Alterator Entry (`.service`, `.application`) для отображения параметров и ресурса сервиса.
4. Клиенты вызывают методы D-Bus через интерфейсы, реализованные демоном и вспомогательными helper-скриптами пакета сервиса.
5. Результаты работы (коды возврата, журнал stdout/stderr) транслируются обратно через интерфейсы и сигналы.

## Организация каталогов
Распределение:
- `alterator-entry/doc/` — актуальная спецификация формата Alterator Entry и дополнительные заметки.
- `alterator-manager/docs/` — описание формата `.backend` и устройства демона.
- `alterator-interface-service/doc/` — документация D-Bus-интерфейса управления сервисами.
- `alterator-service-*/` — примеры рабочих сервисов, каждый содержит `.service`, `.backend` и helper.
- `alterator-test-services/` — шаблоны и скрипты для тестовых сервисов, полезны для изучения структуры.
- `alterator-manager-servises.wiki` и `interface-service.wiki/` — инструкции по эксплуатации и UI.

## Минимальный набор для нового сервиса
Требуется:
- `.service` — описание параметров, ресурсов и локализаций сервиса в формате Alterator Entry.
- `.backend` — описание D-Bus-интерфейса и привязка методов к helper-исполняемым файлам.
- helper-скрипт — реализация операций Deploy/Start/Stop и других действий.
- при необходимости `.diag` или `.component` — дополнительные сущности для диагностических инструментов и компонентов UI.

## Как ориентироваться в коде
Рекомендации:
- Начать с чтения `alterator-entry/doc/README.md` для понимания ключей и структур Alterator Entry.
- Разобрать `alterator-manager/docs/README-ru.md`, чтобы понять как демон читает и проверяет `.backend` файлы.
- Использовать `alterator-test-services/` как источник минимальных примеров развертывания сервиса.
- Сопоставить учебные примеры с продуктивными каталогами `alterator-service-*`, чтобы увидеть расширенные сценарии.
